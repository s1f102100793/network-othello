(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{3769:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/battle",function(){return n(1020)}])},1020:function(t,e,n){"use strict";n.r(e);var a=n(5893),o=n(8583),c=n(1664),l=n.n(c),s=n(7294),r=n(5371),u=n(3376),_=n(3377),i=n(6548),b=n.n(i);e.default=()=>{let[t]=(0,o.KO)(r.L),[e,n]=(0,s.useState)([[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0],[0,0,0,1,2,3,0,0],[0,0,3,2,1,0,0,0],[0,0,0,3,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]),[c,i]=(0,s.useState)(1),d=async()=>{let t=await u.x.board.$get().catch(_.F);null!==t&&n(t)},f=async(t,a,o)=>{if(3===e[a][t]){let c=await u.x.board.post({body:{board:e,x:t,y:a,turn:o}});console.log(c.body.board),n(c.body.board),i(3-c.body.turn)}},h=async()=>{let t=await u.x.newboard.post({body:{board:e}});console.log(t),n(t.body),i(1)};(0,s.useEffect)(()=>{d();let t=setInterval(d,100);return()=>clearInterval(t)},[]);let N=(()=>{let t=0;for(let n=0;n<8;n++)for(let a=0;a<8;a++)3===e[n][a]&&t++;return t})();0===N&&alert("ゲーム終了");let k=(t,e)=>{let n=0;for(let a of e)for(let e of a)e===t&&n++;return n},[m,x]=(0,s.useState)(0),[w,j]=(0,s.useState)(0);(0,s.useEffect)(()=>{x(k(1,e)),j(k(2,e))},[e]);let p=m+w,v="ユーザー".concat(c,"のターン"),[y,E]=(0,s.useState)(m);return(0,s.useEffect)(()=>{E(k(1,e))},[e]),(0,a.jsxs)("div",{className:b().container,style:{"--new-black-percentage":"".concat(y/p*100,"%")},children:[(0,a.jsx)("div",{className:b().board,children:e.map((t,e)=>t.map((t,n)=>(0,a.jsx)("div",{className:b().cell,onClick:()=>f(n,e,c),children:0!==t&&(0,a.jsx)("div",{className:b().stone,style:{background:3===t?"#adff2f":1===t?"#000":"#fff"}})},"".concat(n,"-").concat(e))))}),(0,a.jsxs)("div",{className:b().stonecount,children:[(0,a.jsxs)("div",{className:b().blackcount,children:["黒",m]}),(0,a.jsxs)("div",{className:b().whitecount,children:["白",w]})]}),(0,a.jsx)("div",{className:b().counts,children:v}),(0,a.jsx)("button",{className:b().button,onClick:h,children:"ゲーム終了"}),(0,a.jsx)(l(),{href:"/",children:(0,a.jsx)("button",{className:b().homeButton,onClick:h,children:"ホームページへ"})})]})}},6548:function(t){t.exports={container:"battle_container__hUAz1",backgroundShift:"battle_backgroundShift__3k2Em",board:"battle_board__u7GgZ",cell:"battle_cell__QK_HA",stone:"battle_stone__Gj6Hg",button:"battle_button__qhENz",counts:"battle_counts__sSApJ",stonecount:"battle_stonecount__hZr_C",blackcount:"battle_blackcount__kGdWU",whitecount:"battle_whitecount___joNK",homeButton:"battle_homeButton__zh_9Q"}}},function(t){t.O(0,[664,774,888,179],function(){return t(t.s=3769)}),_N_E=t.O()}]);